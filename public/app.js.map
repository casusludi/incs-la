{"version":3,"sources":["app/components/ChangeLocation.js","app/components/EndGame.js","app/components/IntroGame.js","app/components/Investigate.js","app/components/JSONReader.js","app/components/Landmark.js","app/components/MainGame.js","app/components/Map.js","app/components/NotFound.js","app/components/TimeManager.js","app/components/Witness.js","app/initialize.js","app/utils.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3FA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArFA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzFA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnHA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArUA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/KA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7CA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9EA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9EA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA","file":"public/app.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ChangeLocation = ChangeLocation;\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _run = require('@cycle/run');\n\nvar _isolate = require('@cycle/isolate');\n\nvar _isolate2 = _interopRequireDefault(_isolate);\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction intent(DOM) {\n\n    var click$ = DOM.select('.js-change-location').events('click').mapTo(true);\n\n    return click$;\n}\n\nfunction model(props$, action$) {\n    return action$.map(function (action) {\n        return props$;\n    }).flatten();\n}\n\nfunction view(props$) {\n    return props$.map(function (props) {\n        return (0, _snabbdomJsx.html)(\n            'button',\n            { selector: '.js-change-location', type: 'button' },\n            props.name\n        );\n    });\n}\n\nfunction _ChangeLocation(sources) {\n    var props$ = sources.props$,\n        DOM = sources.DOM;\n\n    var action$ = intent(DOM);\n    var value$ = model(props$, action$);\n    var vdom$ = view(props$);\n\n    var sinks = {\n        DOM: vdom$,\n        changeLocation$: value$,\n        linkValue$: props$\n    };\n\n    return sinks;\n}\n\nfunction ChangeLocation(sources) {\n    return (0, _isolate2.default)(_ChangeLocation)(sources);\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.EndGame = EndGame;\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _run = require('@cycle/run');\n\nvar _isolate = require('@cycle/isolate');\n\nvar _isolate2 = _interopRequireDefault(_isolate);\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nvar _lodash = require('lodash');\n\nvar _ = _interopRequireWildcard(_lodash);\n\nvar _JSONReader = require('./JSONReader');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction intent(DOM) {\n    var click$ = DOM.select('.button-3d').events('click');\n\n    return click$;\n}\n\nfunction view(value$) {\n    var vdom$ = value$.map(function (value) {\n        return (0, _snabbdomJsx.html)(\n            'div',\n            { classNames: 'content end' },\n            ' ',\n            (0, _snabbdomJsx.html)(\n                'div',\n                { className: 'modal' },\n                false /*props.success*/ ? (0, _snabbdomJsx.html)(\n                    'div',\n                    { classNames: 'panel final-panel' },\n                    value.texts.win,\n                    '15h45'\n                ) : (0, _snabbdomJsx.html)(\n                    'div',\n                    { classNames: 'panel final-panel' },\n                    value.texts.loose\n                ),\n                (0, _snabbdomJsx.html)(\n                    'a',\n                    { className: 'button-3d' },\n                    'Rejouer'\n                )\n            )\n        );\n    });\n\n    return vdom$;\n}\n\nfunction _EndGame(sources) {\n    var HTTP = sources.HTTP,\n        DOM = sources.DOM;\n\n    // JSON management\n\n    var jsonSinks = (0, _JSONReader.JSONReader)({ HTTP: HTTP });\n    var jsonRequest$ = jsonSinks.request;\n    var jsonResponse$ = jsonSinks.JSON;\n\n    var action$ = intent(DOM);\n    var vdom$ = view(jsonResponse$);\n\n    var sinks = {\n        DOM: vdom$,\n        HTTP: jsonRequest$,\n        router: action$.mapTo(\"/\")\n    };\n\n    return sinks;\n}\n\nfunction EndGame(sources) {\n    return (0, _isolate2.default)(_EndGame)(sources);\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\t\t\t\tvalue: true\n});\nexports.IntroGame = IntroGame;\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _run = require('@cycle/run');\n\nvar _isolate = require('@cycle/isolate');\n\nvar _isolate2 = _interopRequireDefault(_isolate);\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nvar _lodash = require('lodash');\n\nvar _ = _interopRequireWildcard(_lodash);\n\nvar _JSONReader = require('./JSONReader');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction intent(DOM) {\n\t\t\t\tvar click$ = DOM.select('.button-3d').events('click');\n\n\t\t\t\treturn click$;\n}\n\nfunction view(value$) {\n\t\t\t\tvar vdom$ = value$.map(function (value) {\n\t\t\t\t\t\t\t\treturn (0, _snabbdomJsx.html)(\n\t\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t\t{ classNames: 'content intro', style: { backgroundImage: \"url(\" + value.settings.images.intro + \")\" } },\n\t\t\t\t\t\t\t\t\t\t\t\t(0, _snabbdomJsx.html)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ className: 'modal' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(0, _snabbdomJsx.html)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ className: 'panel' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue.texts.intro\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(0, _snabbdomJsx.html)(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'a',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ className: 'button-3d' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue.texts.play\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\treturn vdom$;\n}\n\nfunction _IntroGame(sources) {\n\t\t\t\tvar HTTP = sources.HTTP,\n\t\t\t\t    DOM = sources.DOM;\n\n\t\t\t\t// JSON management\n\n\t\t\t\tvar jsonSinks = (0, _JSONReader.JSONReader)({ HTTP: HTTP });\n\t\t\t\tvar jsonRequest$ = jsonSinks.request;\n\t\t\t\tvar jsonResponse$ = jsonSinks.JSON;\n\n\t\t\t\tvar action$ = intent(DOM);\n\t\t\t\tvar vdom$ = view(jsonResponse$);\n\n\t\t\t\tvar sinks = {\n\t\t\t\t\t\t\t\tDOM: vdom$,\n\t\t\t\t\t\t\t\tHTTP: jsonRequest$,\n\t\t\t\t\t\t\t\trouter: action$.mapTo(\"/game\")\n\t\t\t\t};\n\n\t\t\t\treturn sinks;\n}\n\nfunction IntroGame(sources) {\n\t\t\t\treturn (0, _isolate2.default)(_IntroGame)(sources);\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Investigate = Investigate;\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _run = require('@cycle/run');\n\nvar _isolate = require('@cycle/isolate');\n\nvar _isolate2 = _interopRequireDefault(_isolate);\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction intent(DOM) {\n    return DOM.select('.js-investigate').events('click').mapTo(true);\n}\n\nfunction model(action$, props$) {\n    return props$.map(function (props) {\n        return action$.map(function (val) {\n            return {\n                name: props.name,\n                image: props.image,\n                dialog: props.dialog,\n                clue: props.clue,\n                showResult: val\n            };\n        }).startWith(props);\n    }).flatten().remember();\n}\n\nfunction view(state$) {\n    return state$.map(function (state) {\n        return (0, _snabbdomJsx.html)(\n            'section',\n            { selector: '.place-item' },\n            state.showResult ? (0, _snabbdomJsx.html)(\n                'figure',\n                null,\n                (0, _snabbdomJsx.html)('img', { src: state.image }),\n                (0, _snabbdomJsx.html)(\n                    'figcaption',\n                    null,\n                    state.clue ? (0, _snabbdomJsx.html)(\n                        'span',\n                        null,\n                        state.clue.text\n                    ) : (0, _snabbdomJsx.html)(\n                        'span',\n                        null,\n                        state.dialog\n                    )\n                )\n            ) : (0, _snabbdomJsx.html)(\n                'button',\n                { selector: '.js-investigate', type: 'button' },\n                state.name\n            )\n        );\n    });\n}\n\nfunction _Investigate(sources) {\n\n    var action$ = intent(sources.DOM);\n    var state$ = model(action$, sources.props);\n    var vdom$ = view(state$);\n\n    var sinks = {\n        DOM: vdom$,\n        value: state$.map(function (state) {\n            return !!state.showResult;\n        })\n    };\n\n    return sinks;\n}\n\nfunction Investigate(sources) {\n    return (0, _isolate2.default)(_Investigate)(sources);\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.JSONReader = JSONReader;\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _run = require('@cycle/run');\n\nvar _isolate = require('@cycle/isolate');\n\nvar _isolate2 = _interopRequireDefault(_isolate);\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction JSONReader(sources) {\n\n    var request$ = _xstream2.default.of({\n        url: '/data.json',\n        category: 'data'\n    });\n\n    var response$ = sources.HTTP.select('data').flatten().map(function (response) {\n        return response.body;\n    });\n\n    var sinks = {\n        JSON: response$,\n        request: request$\n    };\n\n    return sinks;\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.Landmark = Landmark;\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _run = require('@cycle/run');\n\nvar _dom = require('@cycle/dom');\n\nvar _isolate = require('@cycle/isolate');\n\nvar _isolate2 = _interopRequireDefault(_isolate);\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction intent(DOM) {\n    var action$ = _xstream2.default.merge(DOM.select('.js-change-location').events('click').mapTo({ type: \"changeLocation\" }), DOM.select('.js-show-info').events('click').mapTo({ type: \"showInfos\" }));\n\n    return action$;\n}\n\nfunction model(props$, action$) {\n    return action$.filter(function (action) {\n        return action.type === \"changeLocation\";\n    }).map(function (action) {\n        return props$.map(function (props) {\n            return props.location;\n        });\n    }).flatten();\n}\n\nfunction view(props$, action$) {\n    var showInfos$ = action$.filter(function (action) {\n        return action.type === \"showInfos\";\n    }).fold(function (acc, x) {\n        return acc ? false : true;\n    }, false);\n\n    return _xstream2.default.combine(props$, showInfos$).map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            props = _ref2[0],\n            showInfos = _ref2[1];\n\n        return _dom.svg.g({ attrs: { transform: \"translate(\" + props.pixelCoordinates.x + \" \" + props.pixelCoordinates.y + \")\" } }, [_dom.svg.image({ attrs: {\n                'xlink:href': props.isCurrentLocation ? props.settings.images.currentLocationLandmark : props.isReachableLandmark ? props.settings.images.reachableLandmark : props.settings.images.unreachableLandmark,\n                class: \"js-show-info\"\n            } }), showInfos ? _dom.svg.g({ attrs: { transform: \"translate(0 -15)\" } }, [_dom.svg.text(props.location.name), props.isReachableLandmark ? _dom.svg.text({ attrs: { x: \"0\", y: \"15\", class: \"js-change-location\" } }, \"Move to\") : \"\"]) : \"\"]);\n    }\n\n    /*<div>\r\n        <img \r\n            // class-js-change-location={props.isReachableLandmark}\r\n            className=\"js-show-info\"\r\n            src={props.isCurrentLocation ? \r\n                    props.settings.images.currentLocationLandmark : \r\n                    (props.isReachableLandmark ? \r\n                        props.settings.images.reachableLandmark : \r\n                        props.settings.images.unreachableLandmark)}\r\n            style={ ({\r\n                position: 'absolute',  \r\n                left: props.pixelCoordinates.x + \"px\",\r\n                top: props.pixelCoordinates.y + \"px\",\r\n            }) }\r\n        />\r\n        {showInfos ?\r\n            <div\r\n                style={ ({\r\n                    position: 'absolute',  \r\n                    left: props.pixelCoordinates.x + \"px\",\r\n                    top: props.pixelCoordinates.y + 30 + \"px\",\r\n                    backgroundColor: \"white\",\r\n                }) }\r\n            >\r\n                {props.location.name}\r\n                  {props.isReachableLandmark ?\r\n                    <button selector=\".js-change-location\" type=\"button\" >Move to</button> :\r\n                    \"\"\r\n                }\r\n            </div> :\r\n            \"\"\r\n        }\r\n    </div>*/\n    );\n}\n\nfunction _Landmark(sources) {\n    var props$ = sources.props$,\n        DOM = sources.DOM;\n\n    var action$ = intent(DOM);\n    var value$ = model(props$, action$);\n    var vdom$ = view(props$, action$);\n\n    var sinks = {\n        DOM: vdom$,\n        changeLocation$: value$\n    };\n\n    return sinks;\n}\n\nfunction Landmark(sources) {\n    return (0, _isolate2.default)(_Landmark)(sources);\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.MainGame = MainGame;\n\nvar _run = require('@cycle/run');\n\nvar _dom = require('@cycle/dom');\n\nvar _http = require('@cycle/http');\n\nvar _cyclicRouter = require('cyclic-router');\n\nvar _isolate = require('@cycle/isolate');\n\nvar _isolate2 = _interopRequireDefault(_isolate);\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _fromDiagram = require('xstream/extra/fromDiagram');\n\nvar _fromDiagram2 = _interopRequireDefault(_fromDiagram);\n\nvar _dropRepeats = require('xstream/extra/dropRepeats');\n\nvar _dropRepeats2 = _interopRequireDefault(_dropRepeats);\n\nvar _delay = require('xstream/extra/delay');\n\nvar _delay2 = _interopRequireDefault(_delay);\n\nvar _pairwise = require('xstream/extra/pairwise');\n\nvar _pairwise2 = _interopRequireDefault(_pairwise);\n\nvar _lodash = require('lodash');\n\nvar _ = _interopRequireWildcard(_lodash);\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nvar _switchPath = require('switch-path');\n\nvar _switchPath2 = _interopRequireDefault(_switchPath);\n\nvar _Investigate = require('./Investigate');\n\nvar _ChangeLocation = require('./ChangeLocation');\n\nvar _Witness = require('./Witness');\n\nvar _JSONReader = require('./JSONReader');\n\nvar _TimeManager = require('./TimeManager');\n\nvar _Map = require('./Map');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _MainGame(sources) {\n\n  // console.log(sources.router);\n\n  var HTTP = sources.HTTP,\n      DOM = sources.DOM;\n\n  // JSON management\n\n  var jsonSinks = (0, _JSONReader.JSONReader)({ HTTP: HTTP });\n  var jsonRequest$ = jsonSinks.request;\n  var jsonResponse$ = jsonSinks.JSON;\n\n  var settings$ = jsonResponse$.map(function (jsonResponse) {\n    return jsonResponse.settings;\n  });\n  var texts$ = jsonResponse$.map(function (jsonResponse) {\n    return jsonResponse.texts;\n  });\n  var path$ = jsonResponse$.map(function (jsonResponse) {\n    return jsonResponse.path;\n  });\n  var locations$ = jsonResponse$.map(function (jsonResponse) {\n    return jsonResponse.locations;\n  });\n\n  // Locations management\n  var changeLocationProxy$ = _xstream2.default.create();\n\n  var currentLocation$ = changeLocationProxy$.remember();\n\n  var lastLocation$ = currentLocation$.compose(_pairwise2.default).map(function (item) {\n    return item[0];\n  }).startWith(\"\");\n\n  var nextCorrectLocationProxy$ = _xstream2.default.create();\n\n  var pathInit$ = _xstream2.default.combine(path$, locations$).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        path = _ref2[0],\n        locations = _ref2[1];\n\n    return Object.assign({}, locations[path[0].location], { id: path[0].location });\n  });\n\n  var currentLocationLinks$ = _xstream2.default.combine(nextCorrectLocationProxy$, currentLocation$, lastLocation$, locations$).map(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 5),\n        nextCorrectLocation = _ref4[0],\n        currentLocation = _ref4[1],\n        lastLocation = _ref4[2],\n        locations = _ref4[3],\n        path = _ref4[4];\n\n    var links = _.chain(currentLocation.links || []).concat(lastLocation ? [lastLocation.id] : []).uniq().filter(function (o) {\n      return o !== currentLocation.id;\n    }).shuffle().value();\n\n    return links.map(function (link) {\n      return (0, _ChangeLocation.ChangeLocation)({\n        DOM: DOM,\n        props$: _xstream2.default.of(Object.assign({}, locations[link], { id: link }))\n      });\n    });\n  });\n\n  var currentLinksValues$ = currentLocationLinks$.map(function (links) {\n    return _xstream2.default.combine.apply(_xstream2.default, _toConsumableArray(links.map(function (link) {\n      return link.linkValue$;\n    })));\n  }).flatten();\n\n  // Map\n  var mapProps$ = _xstream2.default.combine(currentLocation$, settings$, locations$, currentLinksValues$);\n  var mapSinks = (0, _Map.Map)({ DOM: DOM, props$: mapProps$ });\n  //////////\n\n  var changeLocation$ = _xstream2.default.merge(currentLocationLinks$.map(function (links) {\n    return _xstream2.default.merge.apply(_xstream2.default, _toConsumableArray(links.map(function (link) {\n      return link.changeLocation$;\n    })));\n  }).startWith(pathInit$).flatten(), mapSinks.changeLocation$);\n\n  changeLocationProxy$.imitate(changeLocation$);\n\n  // Progression management\n  var progressionProxy$ = _xstream2.default.create();\n\n  var nextCorrectLocation$ = _xstream2.default.combine(path$, progressionProxy$).map(function (_ref5) {\n    var _ref6 = _slicedToArray(_ref5, 2),\n        path = _ref6[0],\n        progression = _ref6[1];\n\n    return { id: path.length > progression + 1 ? path[progression + 1].location : null };\n  }).remember();\n\n  nextCorrectLocationProxy$.imitate(nextCorrectLocation$.compose((0, _dropRepeats2.default)()));\n\n  var correctNextChoosenCity$ = _xstream2.default.combine(currentLocation$, nextCorrectLocation$).filter(function (_ref7) {\n    var _ref8 = _slicedToArray(_ref7, 2),\n        currentLocation = _ref8[0],\n        nextCorrectLocation = _ref8[1];\n\n    return currentLocation.id === nextCorrectLocation.id;\n  });\n\n  var progression$ = correctNextChoosenCity$.mapTo(1).fold(function (acc, x) {\n    return acc + x;\n  }, 0);\n\n  progressionProxy$.imitate(_xstream2.default.merge(progression$, _xstream2.default.of(0)));\n\n  // Witness management\n  var witnessesData$ = currentLocation$.map(function (currentLocation) {\n    return currentLocation.places;\n  });\n\n  var witnesses$ = _xstream2.default.combine(witnessesData$, path$, currentLocation$, progression$).map(function (_ref9) {\n    var _ref10 = _slicedToArray(_ref9, 4),\n        witnessesData = _ref10[0],\n        path = _ref10[1],\n        currentLocation = _ref10[2],\n        progression = _ref10[3];\n\n    return Object.keys(witnessesData).map(function (key, value) {\n      return (0, _isolate2.default)(_Witness.Witness, key)({\n        DOM: sources.DOM,\n        props$: _xstream2.default.of(Object.assign({}, witnessesData[key], path[progression].location === currentLocation.id ? { clue: path[progression].clues[key] } : {}))\n      });\n    });\n  });\n\n  var witnessQuestionned$ = witnesses$.map(function (witnesses) {\n    return _xstream2.default.merge.apply(_xstream2.default, _toConsumableArray(witnesses.map(function (witness) {\n      return witness.questionned$;\n    })));\n  }).flatten();\n\n  // Time management\n  var timeManagerSinks = (0, _TimeManager.TimeManager)({ DOM: DOM, settings: settings$, changeLocation: changeLocation$, witnessQuestionned: witnessQuestionned$ });\n\n  // End game reached ?\n  var lastLocationReached$ = _xstream2.default.combine(path$, progression$).filter(function (_ref11) {\n    var _ref12 = _slicedToArray(_ref11, 2),\n        path = _ref12[0],\n        progression = _ref12[1];\n\n    return progression === path.length - 1;\n  }).mapTo(true);\n\n  // View\n  var witnessesVTree$ = witnesses$.map(function (witnesses) {\n    return _xstream2.default.combine.apply(_xstream2.default, _toConsumableArray(witnesses.map(function (witness) {\n      return witness.DOM;\n    })));\n  }).flatten();\n  var linksVTree$ = currentLocationLinks$.map(function (links) {\n    return _xstream2.default.combine.apply(_xstream2.default, _toConsumableArray(links.map(function (link) {\n      return link.DOM;\n    })));\n  }).flatten();\n  var TimeManagerVTree$ = timeManagerSinks.DOM;\n  var mapVTree$ = mapSinks.DOM;\n\n  var DOMSink$ = _xstream2.default.combine(linksVTree$, currentLocation$, witnessesVTree$, progression$, TimeManagerVTree$, mapVTree$, texts$, witnessQuestionned$.startWith(false)).map(function (_ref13) {\n    var _ref14 = _slicedToArray(_ref13, 8),\n        linksVTree = _ref14[0],\n        currentLocation = _ref14[1],\n        witnessesVTree = _ref14[2],\n        progression = _ref14[3],\n        TimeManagerVTree = _ref14[4],\n        mapVTree = _ref14[5],\n        texts = _ref14[6],\n        witnessQuestionned = _ref14[7];\n\n    return (0, _snabbdomJsx.html)(\n      'section',\n      { className: 'city', style: { backgroundImage: \"url(\" + currentLocation.image + \")\" } },\n      (0, _snabbdomJsx.html)(\n        'section',\n        { className: 'col-main' },\n        (0, _snabbdomJsx.html)(\n          'header',\n          null,\n          (0, _snabbdomJsx.html)(\n            'h1',\n            null,\n            currentLocation.name\n          )\n        ),\n        (0, _snabbdomJsx.html)(\n          'section',\n          { className: 'place-list' },\n          witnessesVTree\n        ),\n        (0, _snabbdomJsx.html)(\n          'aside',\n          { className: 'aside' },\n          (0, _snabbdomJsx.html)(\n            'div',\n            { classNames: 'city-desc scrollable-panel panel' },\n            currentLocation.desc\n          ),\n          (0, _snabbdomJsx.html)(\n            'div',\n            { classNames: 'panel scrollable-panel' },\n            texts.gameDescription\n          ),\n          (0, _snabbdomJsx.html)(\n            'div',\n            { classNames: 'game-time panel red-panel' },\n            TimeManagerVTree\n          )\n        )\n      ),\n      (0, _snabbdomJsx.html)(\n        'footer',\n        null,\n        (0, _snabbdomJsx.html)(\n          'div',\n          { className: 'travel-panel' },\n          witnessQuestionned ? (0, _snabbdomJsx.html)(\n            'div',\n            null,\n            (0, _snabbdomJsx.html)(\n              'div',\n              { className: 'travel-labem' },\n              texts.travelLabel\n            ),\n            (0, _snabbdomJsx.html)(\n              'nav',\n              null,\n              linksVTree\n            )\n          ) : (0, _snabbdomJsx.html)(\n            'div',\n            null,\n            texts.travelDescription\n          )\n        )\n      ),\n      mapVTree\n    );\n  });\n\n  var sinks = {\n    DOM: DOMSink$,\n    HTTP: jsonRequest$,\n    router: lastLocationReached$.mapTo(\"/end\") // lastLocationReached$.mapTo({ pathname: \"/end\", state: { elapsedTime: timeManagerSinks.elapsedTime} })\n  };\n  return sinks;\n}\n\nfunction MainGame(sources) {\n  return (0, _isolate2.default)(_MainGame)(sources);\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.Map = Map;\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _run = require('@cycle/run');\n\nvar _dom = require('@cycle/dom');\n\nvar _isolate = require('@cycle/isolate');\n\nvar _isolate2 = _interopRequireDefault(_isolate);\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nvar _Landmark = require('./Landmark');\n\nvar _lodash = require('lodash');\n\nvar _ = _interopRequireWildcard(_lodash);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction intent(DOM) {\n\n    return _xstream2.default.merge(DOM.select('.js-show-map').events('click').fold(function (acc, x) {\n        return acc ? false : true;\n    }, true).map(function (value) {\n        return { type: \"showMap\", value: value };\n    }));\n}\n\nfunction model(props$, DOM) {\n    var propsWithPixelCoordinates$ = props$.map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 4),\n            currentLocation = _ref2[0],\n            settings = _ref2[1],\n            locations = _ref2[2],\n            currentLinksValues = _ref2[3];\n\n        var landmark1 = settings.landmarks[0].location;\n        var landmark2 = settings.landmarks[1].location;\n        var coordinateLandmark1 = locations[landmark1].coordinates;\n        var coordinateLandmark2 = locations[landmark2].coordinates;\n        var pixelCoordinateLandmark1 = settings.landmarks[0].pixelCoordinates;\n        var pixelCoordinateLandmark2 = settings.landmarks[1].pixelCoordinates;\n\n        var linksIDs = currentLinksValues.map(function (currentLinkValue) {\n            return currentLinkValue.id;\n        });\n\n        return Object.keys(locations).map(function (key, value) {\n            var xRatio = (coordinateLandmark2.latitude - coordinateLandmark1.latitude) / (pixelCoordinateLandmark2.x - pixelCoordinateLandmark1.x);\n            var x0 = (pixelCoordinateLandmark2.x * coordinateLandmark1.latitude - pixelCoordinateLandmark1.x * coordinateLandmark2.latitude) / (pixelCoordinateLandmark2.x - pixelCoordinateLandmark1.x);\n            var curX = (locations[key].coordinates.latitude - x0) / xRatio - settings.landmarkImageDimension.x / 2;\n\n            var yRatio = (coordinateLandmark2.longitude - coordinateLandmark1.longitude) / (pixelCoordinateLandmark2.y - pixelCoordinateLandmark1.y);\n            var y0 = (pixelCoordinateLandmark2.y * coordinateLandmark1.longitude - pixelCoordinateLandmark1.y * coordinateLandmark2.longitude) / (pixelCoordinateLandmark2.y - pixelCoordinateLandmark1.y);\n            var curY = (locations[key].coordinates.longitude - y0) / yRatio - settings.landmarkImageDimension.y;\n\n            var isCurrentLocation = key === currentLocation.id;\n            var isReachableLandmark = _.includes(linksIDs, key);\n\n            return {\n                settings: settings,\n                location: Object.assign({}, locations[key], { id: key }),\n                pixelCoordinates: {\n                    x: curX,\n                    y: curY\n                },\n                isCurrentLocation: isCurrentLocation,\n                isReachableLandmark: isReachableLandmark\n            };\n        });\n    });\n\n    var landmarks$ = propsWithPixelCoordinates$.map(function (propsWithPixelCoordinates) {\n        return propsWithPixelCoordinates.map(function (propWithPixelCoordinates) {\n            return (0, _Landmark.Landmark)({ DOM: DOM, props$: _xstream2.default.of(propWithPixelCoordinates) });\n        });\n    });\n\n    return landmarks$;\n}\n\nfunction view(value$, props$, action$) {\n    var landmarksVTree$ = value$.map(function (landmarks) {\n        return _xstream2.default.combine.apply(_xstream2.default, _toConsumableArray(landmarks.map(function (landmark) {\n            return landmark.DOM;\n        })));\n    }).flatten().debug();\n\n    var showMap$ = action$.filter(function (action) {\n        return action.type === \"showMap\";\n    }).map(function (showMap) {\n        return showMap.value;\n    });\n\n    var vdom$ = _xstream2.default.combine(value$, landmarksVTree$, props$, showMap$).map(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 4),\n            value = _ref4[0],\n            landmarksVTree = _ref4[1],\n            _ref4$ = _slicedToArray(_ref4[2], 4),\n            currentLocation = _ref4$[0],\n            settings = _ref4$[1],\n            locations = _ref4$[2],\n            currentLinksValues = _ref4$[3],\n            showMap = _ref4[3];\n\n        return (\n            /*\r\n            <svg attrs= {{ width: \"792px\", height: \"574px\" }}>\r\n                <image attrs={{ width: \"100%\", height: \"100%\", 'xlink:href': settings.images.map}} />\r\n            </svg>\r\n            */\n\n            (0, _snabbdomJsx.html)(\n                'div',\n                null,\n                (0, _snabbdomJsx.html)(\n                    'button',\n                    { selector: '.js-show-map', type: 'button' },\n                    'Show map'\n                ),\n                showMap ? (0, _snabbdomJsx.html)(\n                    'div',\n                    { 'class-map': 'true' },\n                    (0, _dom.svg)({ attrs: { width: \"792px\", height: \"574px\", 'background-color': \"green\" } }, [_dom.svg.rect({ attrs: { width: \"100%\", height: \"100%\", fill: \"red\", \"fill-opacity\": \"0.25\" } }), _dom.svg.image({ attrs: { width: \"100%\", height: \"100%\", 'xlink:href': settings.images.map } })].concat(_toConsumableArray(landmarksVTree)))\n                ) : \"\"\n            )\n        );\n    });\n\n    return vdom$;\n}\n\nfunction _Map(sources) {\n    var props$ = sources.props$,\n        DOM = sources.DOM;\n\n    var action$ = intent(DOM);\n    var value$ = model(props$, DOM);\n\n    var changeLocation$ = value$.map(function (landmarks) {\n        return _xstream2.default.merge.apply(_xstream2.default, _toConsumableArray(landmarks.map(function (landmark) {\n            return landmark.changeLocation$;\n        })));\n    }).flatten();\n\n    var vdom$ = view(value$, props$, action$);\n\n    var sinks = {\n        DOM: vdom$,\n        changeLocation$: changeLocation$\n    };\n\n    return sinks;\n}\n\nfunction Map(sources) {\n    return (0, _isolate2.default)(_Map)(sources);\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.NotFound = NotFound;\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _run = require('@cycle/run');\n\nvar _isolate = require('@cycle/isolate');\n\nvar _isolate2 = _interopRequireDefault(_isolate);\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction NotFound(sources) {\n    var previousPageClick$ = sources.DOM.select(\".previous\").events(\"click\");\n    var goBack$ = previousPageClick$.mapTo({ type: \"goBack\" });\n\n    var DOMSink$ = _xstream2.default.of((0, _snabbdomJsx.html)(\n        'div',\n        null,\n        (0, _snabbdomJsx.html)(\n            'h1',\n            null,\n            '404 Not Found'\n        ),\n        (0, _snabbdomJsx.html)(\n            'button',\n            { selector: '.previous' },\n            'Previous'\n        )\n    ));\n\n    return {\n        DOM: DOMSink$,\n        router: goBack$\n    };\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.TimeManager = TimeManager;\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _run = require('@cycle/run');\n\nvar _isolate = require('@cycle/isolate');\n\nvar _isolate2 = _interopRequireDefault(_isolate);\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nvar _lodash = require('lodash');\n\nvar _ = _interopRequireWildcard(_lodash);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction model(sources) {\n    var settings$ = sources.settings;\n    var changeLocation$ = sources.changeLocation;\n    var witnessQuestionned$ = sources.witnessQuestionned;\n\n    var elapsedTime$ = settings$.map(function (settings) {\n        return _xstream2.default.merge(changeLocation$.mapTo(settings.cost.travel), witnessQuestionned$.map(function (witnessQuestionned) {\n            return witnessQuestionned ? settings.cost.investigate : 0;\n        }));\n    }).flatten().fold(function (acc, x) {\n        return acc + x;\n    }, 0);\n\n    return elapsedTime$.map(function (elapsedTime) {\n        var hours = parseInt(elapsedTime % 24);\n        var minutes = (elapsedTime % 24 - hours) * 60;\n        return {\n            raw: elapsedTime,\n            hours: hours,\n            minutes: minutes\n        };\n    });\n}\n\nfunction view(value$) {\n    return value$.map(function (value) {\n        return (0, _snabbdomJsx.html)(\n            'span',\n            null,\n            _.padStart(value.hours, 2, '0'),\n            'h',\n            _.padStart(value.minutes, 2, '0')\n        );\n    });\n}\n\nfunction _TimeManager(sources) {\n    var value$ = model(sources);\n    var vdom$ = view(value$);\n\n    var sinks = {\n        DOM: vdom$,\n        elapsedTime: value$\n    };\n\n    return sinks;\n}\n\nfunction TimeManager(sources) {\n    return (0, _isolate2.default)(_TimeManager)(sources);\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Witness = Witness;\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _run = require('@cycle/run');\n\nvar _snabbdomJsx = require('snabbdom-jsx');\n\nvar _utils = require('../utils');\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction intent(DOM) {\n\n    var click$ = DOM.select('.js-question-witness').events('click');\n\n    return click$;\n}\n\nfunction model(props$, action$) {\n    return props$.map(function (props) {\n        return action$.map(function (action) {\n            return Object.assign(props, { showResult: true });\n        }).startWith(props);\n    }).flatten().remember();\n}\n\nfunction view(value$) {\n    return value$.map(function (value) {\n        return (0, _snabbdomJsx.html)(\n            'section',\n            { className: 'place-item' },\n            value.showResult ? (0, _snabbdomJsx.html)(\n                'figure',\n                null,\n                (0, _snabbdomJsx.html)('img', { src: value.image }),\n                (0, _snabbdomJsx.html)(\n                    'figcaption',\n                    null,\n                    (0, _snabbdomJsx.html)('span', { hook: { insert: function insert(vnode) {\n                                return vnode.elm.innerHTML = value.clue ? (0, _utils.formatLinks)(value.clue.text) : _lodash2.default.sample(value.dialogs);\n                            } } })\n                )\n            ) : (0, _snabbdomJsx.html)(\n                'button',\n                { classNames: 'js-question-witness button-3d', type: 'button' },\n                value.name\n            )\n        );\n    });\n}\n\nfunction Witness(sources) {\n    var props$ = sources.props$,\n        DOM = sources.DOM;\n\n    var action$ = intent(DOM);\n    var value$ = model(props$, action$);\n    var vdom$ = view(value$);\n\n    var sinks = {\n        DOM: vdom$,\n        questionned$: action$.mapTo(true)\n    };\n\n    return sinks;\n}\n","'use strict';\n\nvar _run = require('@cycle/run');\n\nvar _dom = require('@cycle/dom');\n\nvar _http = require('@cycle/http');\n\nvar _cyclicRouter = require('cyclic-router');\n\nvar _xstream = require('xstream');\n\nvar _xstream2 = _interopRequireDefault(_xstream);\n\nvar _switchPath = require('switch-path');\n\nvar _switchPath2 = _interopRequireDefault(_switchPath);\n\nvar _history = require('history');\n\nvar _IntroGame = require('./components/IntroGame');\n\nvar _MainGame = require('./components/MainGame');\n\nvar _EndGame = require('./components/EndGame');\n\nvar _NotFound = require('./components/NotFound');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction main(sources) {\n  var HTTP = sources.HTTP,\n      DOM = sources.DOM;\n\n\n  var match$ = sources.router.define({\n    '/': _IntroGame.IntroGame,\n    '/game': _MainGame.MainGame,\n    '/end': _EndGame.EndGame,\n    '*': _NotFound.NotFound\n  });\n\n  var page$ = match$.map(function (_ref) {\n    var path = _ref.path,\n        value = _ref.value;\n    return value(Object.assign({}, sources, { router: sources.router.path(path) }));\n  });\n\n  var sinks = {\n    DOM: page$.map(function (c) {\n      return c.DOM;\n    }).flatten(),\n    router: page$.map(function (c) {\n      return c.router;\n    }).flatten(),\n    HTTP: page$.filter(function (c) {\n      return c.HTTP;\n    }).map(function (c) {\n      return c.HTTP;\n    }).flatten()\n  };\n\n  return sinks;\n}\n\nvar drivers = {\n  DOM: (0, _dom.makeDOMDriver)('#app'),\n  HTTP: (0, _http.makeHTTPDriver)(),\n  router: (0, _cyclicRouter.makeRouterDriver)((0, _history.createBrowserHistory)(), _switchPath2.default)\n};\n\n(0, _run.run)(main, drivers);\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatLinks = formatLinks;\nvar RE = /\\[([^\\]]*)\\]\\(([^)]*)\\)/g;\n\nfunction formatLinks(text) {\n  return text.replace(RE, '<a href=\"$2\" target=\"_blank\">$1</a>');\n}\n"]}